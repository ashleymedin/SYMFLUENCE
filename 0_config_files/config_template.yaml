### ============================================= SYMFLUENCE configuration file ============================================================
# This configuration file contains all settings required to run the SYMFLUENCE workflow, from conceptualisation to evaluation.
# The configuration settings are organized based on modules and can be populated as the user moves through the individual components
# of the hydrological modelling exercise. Configurations are organized into logical blocks:
#
#   1. Global and Logging Settings — Experiment metadata and runtime controls
#   2. Geospatial Definition — Domain delineation and discretization
#   3. Data and Forcings — Input datasets and acquisition options
#   4. Model Configuration — Model selection and parameters
#   5. Routing — Flow routing with mizuRoute
#   6. Calibration and Optimization — Parameter estimation and metrics
#   7. Emulation — Differentiable emulators for large-domain workflows
#   8. Paths and Resources — Custom paths, file structure, and parallelism
# 
# The global configuration settings are used in several parts of the workflow and configurations from previous steps can be used in subsequent 
# steps of the workflow, but never the other way around. Note on path specification if deviating from default paths, a full path must be specified. 
#E.g. '/home/user/non-default/path'

# Global and Logging Settings
SYMFLUENCE_DATA_DIR: "/path/to/data"
SYMFLUENCE_CODE_DIR: "/path/to/code"
DOMAIN_NAME: "bow_river"
EXPERIMENT_ID: "baseline_01"
EXPERIMENT_TIME_START: "2018-01-01"
EXPERIMENT_TIME_END: "2019-12-31"
MPI_PROCESSES: 40
LOG_LEVEL: INFO
LOG_TO_FILE: True
LOG_FORMAT: detailed

# Geospatial Definition
POUR_POINT_COORDS: 51.17/-115.57
BOUNDING_BOX_COORDS: 51.30/-115.70/51.10/-115.40
STREAMFLOW_RAW_NAME:
DOMAIN_DEFINITION_METHOD: delineate    # delineate | subset | lumped
GEOFABRIC_TYPE: TDX                    # TDX | MERIT | NWS
STREAM_THRESHOLD: 7500
MULTI_SCALE_THRESHOLDS: [2500, 7500, 15000]
USE_DROP_ANALYSIS: True
DROP_ANALYSIS_NUM_THRESHOLDS: 5
DELINEATE_COASTAL_WATERSHEDS: False
DOMAIN_DISCRETIZATION: elevation
ELEVATION_BAND_SIZE: 400
MIN_HRU_SIZE: 5
RADIATION_CLASS_NUMBER: 8
ASPECT_CLASS_NUMBER: 4

# Data and Forcings
FORCING_DATASET: ERA5
FORCING_VARIABLES:
  - airtemp
  - windspd
  - pptrate
  - spechum
  - SWRadAtm
  - LWRadAtm
FORCING_TIME_STEP_SIZE: 3600
APPLY_LAPSE_RATE: True
LAPSE_RATE: -6.5
DATA_ACQUIRE: HPC                     # HPC | supplied | local

# Model Configuration
HYDROLOGICAL_MODEL: SUMMA            # SUMMA | FUSE | GR | LSTM | NextGen
ROUTING_MODEL: mizuRoute
SETTINGS_SUMMA_CONNECT_HRUS: yes 
SETTINGS_SUMMA_TRIALPARAM_N: 1 
SETTINGS_SUMMA_USE_PARALLEL_SUMMA: True 
SETTINGS_SUMMA_CPUS_PER_TASK: 32 
SETTINGS_SUMMA_GRU_PER_JOB: 10
FUSE_SPATIAL_MODE: distributed 
FUSE_DECISION_OPTIONS: default 
SETTINGS_FUSE_PARAMS_TO_CALIBRATE: [alpha, beta, k_storage]
NGEN_BMI_MODULES: [cfe, noah, pet] 
NGEN_NOAH_PARAMS_TO_CALIBRATE: [bexp, dksat, psisat, refkdt] 
NGEN_ACTIVE_CATCHMENT_ID: 1002
GR_SPATIAL_MODE: lumped 
FLASH_HIDDEN_SIZE: 256 
FLASH_EPOCHS: 100 
FLASH_USE_ATTENTION: True

# Routing
SETTINGS_MIZU_ROUTING_DT: 3600
SETTINGS_MIZU_ROUTING_VAR: averageRoutedRunoff
SETTINGS_MIZU_ROUTING_UNITS: m/s
SETTINGS_MIZU_WITHIN_BASIN: 0
SETTINGS_MIZU_OUTPUT_FREQ: daily
SETTINGS_MIZU_OUTPUT_VARS: [Qout, Qsim, storage]

# Calibration and Optimization
CALIBRATION_PERIOD: "2018-01-01,2018-06-30"
EVALUATION_PERIOD: "2018-07-01,2018-12-31"
PARAMS_TO_CALIBRATE: [k_snow, fcapil, newSnowDenMin]
OPTIMIZATION_ALGORITHM: DE
OPTIMIZATION_METRIC: KGE
POPULATION_SIZE: 48
NUMBER_OF_ITERATIONS: 30

# Paths and Resources
SUMMA_INSTALL_PATH: /opt/summa
MIZUROUTE_INSTALL_PATH: /opt/mizuroute
OUTPUT_DIR: /scratch/symfluence/output
SETTINGS_SUMMA_TIME_LIMIT: 02:00:00
SETTINGS_SUMMA_MEM: 12G